class o extends Error{code;constructor(e,t){super(e);this.name="UwuzuError",this.code=t}}async function p(e,t){if(e==="")throw new o("トークンが入力されていません","UWUZU_TOKEN_INVALID");if(this.token!==null)throw new o("あなたはすでにログインコマンドを実行しています","UWUZU_ALREADY_LOGGED_IN");let s=await fetch(`https://${this.domain}/api/me/`,{method:"POST",headers:{"User-Agent":t},body:JSON.stringify({token:e})}).then((r)=>r.json());if(s.success===!1)throw new o("トークンが存在しないか、無効です","UWUZU_TOKEN_INVALID");else return this.token=e,this.me=s,s}async function d(e,t,s){if(!this.me)throw new o("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");let r=await fetch(`https://${this.domain}/api/me/notification/`,{method:"POST",headers:{"User-Agent":s},body:JSON.stringify({token:this.token,limi:e,page:t})}).then((i)=>i.json()),n=Object.entries(r),a=r?.success??!1,m=n.filter(([i])=>!isNaN(Number(i))).map(([,i])=>i);return{success:a,data:m}}async function g(e){if(!this.me)throw new o("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");return await fetch(`https://${this.domain}/api/me/notification/read`,{method:"POST",headers:{"User-Agent":e},body:JSON.stringify({token:this.token})}).then((s)=>s.json())}async function N(e,t){if(!this.me)throw new o("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");let s={};if(s.token=this.token,t.userName)s.username=t.userName;if(t.profile)s.profile=t.profile;if(t.icon)s.icon=t.icon;if(t.header)s.header=t.header;if(Object.keys(s).length===0)throw new o("変更する項目を最低でも一つは入力してください","UWUZU_CONFIG_OPTION_INVALID");return await fetch(`https://${this.domain}/api/me/settings/`,{method:"POST",headers:{"User-Agent":e},body:JSON.stringify(s)}).then((n)=>n.json())}async function R(e,t,s){if(!this.me)throw new o("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");let r=await fetch(`https://${this.domain}/api/ueuse/bookmark/`,{method:"POST",headers:{"User-Agent":e},body:JSON.stringify({token:this.token,limit:t,page:s})}).then((i)=>i.json()),n=Object.entries(r),a=r?.success??!1,m=n.filter(([i])=>!isNaN(Number(i))).map(([,i])=>i);return{success:a,data:m}}class U{parent;userAgent;constructor(e,t){this.parent=e,this.userAgent=t}login(e){return p.call(this.parent,e,this.userAgent)}getNotification({limit:e=5,page:t=0}={}){return d.call(this.parent,e,t,this.userAgent)}setNotificationRead(){return g.call(this.parent,this.userAgent)}setConfig(e){return N.call(this.parent,this.userAgent,e)}getBookmark({limit:e=5,page:t=0}={}){return R.call(this.parent,this.userAgent,e,t)}}async function O(e,t){if(!this.me)throw new o("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");return await fetch(`https://${this.domain}/api/users/`,{method:"POST",headers:{"User-Agent":t},body:JSON.stringify({token:this.token,userid:e})}).then((r)=>r.json())}async function l(e,t,s){if(!this.me)throw new o("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");let r;if(s===!0)r=await fetch(`https://${this.domain}/api/users/follow`,{method:"POST",headers:{"User-Agent":t},body:JSON.stringify({token:this.token,userid:e})}).then((n)=>n.json());else r=await fetch(`https://${this.domain}/api/users/unfollow`,{method:"POST",headers:{"User-Agent":t},body:JSON.stringify({token:this.token,userid:e})}).then((n)=>n.json());return r}class c{parent;userAgent;constructor(e,t){this.parent=e,this.userAgent=t}get(e){return O.call(this.parent,e,this.userAgent)}setFollow(e,t){return l.call(this.parent,e,this.userAgent,t)}}async function z(e,t,s){if(!this.me)throw new o("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");let r=await fetch(`https://${this.domain}/api/ueuse/`,{method:"POST",headers:{"User-Agent":e},body:JSON.stringify({token:this.token,limit:t,page:s})}).then((i)=>i.json()),n=Object.entries(r),a=r.success??!1,m=n.filter(([i])=>!isNaN(Number(i))).map(([,i])=>i);return{success:a,data:m}}async function y(e,t){if(!this.me)throw new o("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");let s=await fetch(`https://${this.domain}/api/ueuse/get`,{method:"POST",headers:{"User-Agent":e},body:JSON.stringify({token:this.token,uniqid:t})}).then((i)=>i.json()),r=Object.entries(s),n=s?.success??!1,m=r.filter(([i])=>!isNaN(Number(i))).map(([,i])=>i)[0];return{success:n,data:m}}async function _(e,t,s,r){if(!this.me)throw new o("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");let n=await fetch(`https://${this.domain}/api/ueuse/replies`,{method:"POST",headers:{"User-Agent":e},body:JSON.stringify({token:this.token,uniqid:t,limit:s,page:r})}).then((f)=>f.json()),a=Object.entries(n),m=n?.success??!1,i=a.filter(([f])=>!isNaN(Number(f))).map(([,f])=>f);return{success:m,data:i}}async function b(e,t,s){if(!this.me)throw new o("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");let r=await fetch(`https://${this.domain}/api/ueuse/mentions`,{method:"POST",headers:{"User-Agent":e},body:JSON.stringify({token:this.token,limit:t,page:s})}).then((i)=>i.json()),n=Object.entries(r),a=r?.success??!1,m=n.filter(([i])=>!isNaN(Number(i))).map(([,i])=>i);return{success:a,data:m}}async function S(e,t,s,r){if(!this.me)throw new o("ログインコマンドを実行していません","UWUZU_ALREADY_LOGGED_IN");let n=await fetch(`https://${this.domain}/api/ueuse/search`,{method:"POST",headers:{"User-Agent":e},body:JSON.stringify({token:this.token,keyword:t,limit:s,page:r})}).then((f)=>f.json()),a=Object.entries(n),m=n?.success??!1,i=a.filter(([f])=>!isNaN(Number(f))).map(([,f])=>f);return{success:m,data:i}}async function P(e,t){if(!this.me)throw new o("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");let s={};if(s.token=this.token,s.text=t.text,t.nsfw)s.nsfw=t.nsfw;if(t.image1)s.image1=t.image1;if(t.image2)s.image2=t.image2;if(t.image3)s.image3=t.image3;if(t.image4)s.image4=t.image4;if(t.replyId)s.replyid=t.replyId;if(t.reuseId)s.reuseid=t.reuseId;return await fetch(`https://${this.domain}/api/ueuse/create`,{method:"POST",headers:{"User-Agent":e},body:JSON.stringify(s)}).then((n)=>n.json())}async function k(e,t){if(!this.me)throw new o("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");return await fetch(`https://${this.domain}/api/ueuse/delete`,{method:"POST",headers:{"User-Agent":e},body:JSON.stringify({token:this.token,uniqid:t})}).then((r)=>r.json())}class h{parent;userAgent;constructor(e,t){this.parent=e,this.userAgent=t}fetchUeuses({limit:e=5,page:t=0}={}){return z.call(this.parent,this.userAgent,e,t)}get(e){return y.call(this.parent,this.userAgent,e)}getReplies(e,{limit:t=5,page:s=0}={}){return _.call(this.parent,this.userAgent,e,t,s)}getMentions({limit:e=5,page:t=0}={}){return b.call(this.parent,this.userAgent,e,t)}search(e,{limit:t=5,page:s=0}={}){return S.call(this.parent,this.userAgent,e,t,s)}create(e){return P.call(this.parent,this.userAgent,e)}remove(e){return k.call(this.parent,this.userAgent,e)}}async function E(e,t){if(!this.me)throw new o("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");let s=await fetch(`https://${this.domain}/api/favorite/change`,{method:"POST",headers:{"User-Agent":e},body:JSON.stringify({token:this.token,uniqid:t})}).then((m)=>m.json()),r=s?.success??!1,a=(s?.favorite_list).split(",").filter((m)=>m!=="");return{success:r,data:a}}async function G(e,t){if(!this.me)throw new o("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");let s=await fetch(`https://${this.domain}/api/favorite/get`,{method:"POST",headers:{"User-Agent":e},body:JSON.stringify({token:this.token,uniqid:t})}).then((m)=>m.json()),r=s?.success??!1,a=(s?.favorite_list).split(",").filter((m)=>m!=="");return{success:r,data:a}}class w{parent;userAgent;constructor(e,t){this.parent=e,this.userAgent=t}change(e){return E.call(this.parent,this.userAgent,e)}get(e){return G.call(this.parent,this.userAgent,e)}}async function x(e){return await fetch(`https://${this.domain}/api/serverinfo-api`,{method:"GET",headers:{"User-Agent":e}}).then((s)=>s.json())}class W{userAgent;domain;token;me;user;users;ueuse;favorite;constructor(e){this.userAgent="uwuzu.js/beta",this.domain=e,this.token=null,this.me=null,this.user=new U(this,this.userAgent),this.users=new c(this,this.userAgent),this.ueuse=new h(this,this.userAgent),this.favorite=new w(this,this.userAgent)}getServerInfo(){return x.call(this,this.userAgent)}}export{W as Uwuzu};
