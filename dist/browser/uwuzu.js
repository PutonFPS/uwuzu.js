class r extends Error{code;constructor(e,t){super(e);this.name="UwuzuError",this.code=t}}async function f(e,t){if(e==="")throw new r("トークンが入力されていません","UWUZU_TOKEN_INVALID");if(this.token!==null)throw new r("あなたはすでにログインコマンドを実行しています","UWUZU_ALREADY_LOGGED_IN");let o=await fetch(`https://${this.domain}/api/me/`,{method:"POST",headers:{"User-Agent":t},body:JSON.stringify({token:e})}).then((i)=>i.json());if(o.success===!1)throw new r("トークンが存在しないか、無効です","UWUZU_TOKEN_INVALID");else return this.token=e,this.me=o,o}async function w(e,t,o){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");return await fetch(`https://${this.domain}/api/me/notification/`,{method:"POST",headers:{"User-Agent":o},body:JSON.stringify({token:this.token,limi:e,page:t})}).then((s)=>s.json())}async function d(e){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");return await fetch(`https://${this.domain}/api/me/notification/read`,{method:"POST",headers:{"User-Agent":e},body:JSON.stringify({token:this.token})}).then((o)=>o.json())}async function p(e,t){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");let o={};if(o.token=this.token,t.userName)o.username=t.userName;if(t.profile)o.profile=t.profile;if(t.icon)o.icon=t.icon;if(t.header)o.header=t.header;if(Object.keys(o).length===0)throw new r("変更する項目を最低でも一つは入力してください","UWUZU_CONFIG_OPTION_INVALID");return await fetch(`https://${this.domain}/api/me/settings`,{method:"POST",headers:{"User-Agent":e},body:JSON.stringify(o)}).then((s)=>s.json())}async function c(e,t,o){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");return await fetch(`https://${this.domain}/api/ueuse/bookmark`,{method:"POST",headers:{"User-Agent":e},body:JSON.stringify({token:this.token,limit:t,page:o})}).then((s)=>s.json())}class m{parent;userAgent;constructor(e,t){this.parent=e,this.userAgent=t}login(e){return f.call(this.parent,e,this.userAgent)}getNotification({limit:e=5,page:t=1}={}){return w.call(this.parent,e,t,this.userAgent)}setNotificationRead(){return d.call(this.parent,this.userAgent)}setConfig(e){return p.call(this.parent,this.userAgent,e)}getBookmark({limit:e=5,page:t=1}={}){return c.call(this.parent,this.userAgent,e,t)}}async function g(e,t){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");return await fetch(`https://${this.domain}/api/users/`,{method:"POST",headers:{"User-Agent":t},body:JSON.stringify({token:this.token,userid:e})}).then((i)=>i.json())}async function z(e,t,o){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");let i;if(o===!0)i=await fetch(`https://${this.domain}/api/users/follow`,{method:"POST",headers:{"User-Agent":t},body:JSON.stringify({token:this.token,userid:e})}).then((s)=>s.json());else i=await fetch(`https://${this.domain}/api/users/unfollow`,{method:"POST",headers:{"User-Agent":t},body:JSON.stringify({token:this.token,userid:e})}).then((s)=>s.json());return i}class u{parent;userAgent;constructor(e,t){this.parent=e,this.userAgent=t}getUser(e){return g.call(this.parent,e,this.userAgent)}setUserFollow(e,t){return z.call(this.parent,e,this.userAgent,t)}}async function O(e,t,o){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");return await fetch(`https://${this.domain}/api/ueuse`,{method:"POST",headers:{"User-Agent":e},body:JSON.stringify({token:this.token,limit:t,page:o})}).then((s)=>s.json())}async function _(e,t){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");return await fetch(`https://${this.domain}/api/ueuse/get`,{method:"POST",headers:{"User-Agent":e},body:JSON.stringify({token:this.token,uniqid:t})}).then((i)=>i.json())}async function N(e,t,o,i){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");return await fetch(`https://${this.domain}/api/ueuse/replies`,{method:"POST",headers:{"User-Agent":e},body:JSON.stringify({token:this.token,uniqid:t,limit:o,page:i})}).then((h)=>h.json())}async function y(e,t,o){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");return await fetch(`https://${this.domain}/api/ueuse/mentions`,{method:"POST",headers:{"User-Agent":e},body:JSON.stringify({token:this.token,limit:t,page:o})}).then((s)=>s.json())}async function S(e,t,o,i){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_ALREADY_LOGGED_IN");return await fetch(`https://${this.domain}/api/ueuse/search`,{method:"POST",headers:{"User-Agent":e},body:JSON.stringify({token:this.token,keyword:t,limit:o,page:i})}).then((h)=>h.json())}async function P(e,t){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");let o={};if(o.token=this.token,o.text=t.text,t.nsfw)o.nsfw=t.nsfw;if(t.image1)o.image1=t.image1;if(t.image2)o.image2=t.image2;if(t.image3)o.image3=t.image3;if(t.image4)o.image4=t.image4;if(t.replyId)o.replyid=t.replyId;if(t.reuseId)o.reuseid=t.reuseId;return await fetch(`https://${this.domain}/api/ueuse/create`,{method:"POST",headers:{"User-Agent":e},body:JSON.stringify(o)}).then((s)=>s.json())}async function R(e,t){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");return await fetch(`https://${this.domain}/api/ueuse/delete`,{method:"POST",headers:{"User-Agent":e},body:JSON.stringify({token:this.token,uniqid:t})}).then((i)=>i.json())}class U{parent;userAgent;constructor(e,t){this.parent=e,this.userAgent=t}fetchUeuses({limit:e=5,page:t=1}={}){return O.call(this.parent,this.userAgent,e,t)}getUeuse(e){return _.call(this.parent,this.userAgent,e)}getReplies(e,{limit:t=5,page:o=1}={}){return N.call(this.parent,this.userAgent,e,t,o)}getMentions({limit:e=5,page:t=1}={}){return y.call(this.parent,this.userAgent,e,t)}search(e,{limit:t=5,page:o=1}={}){return S.call(this.parent,this.userAgent,e,t,o)}create(e){return P.call(this.parent,this.userAgent,e)}remove(e){return R.call(this.parent,this.userAgent,e)}}async function E(e,t){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");return await fetch(`https://${this.domain}/api/favorite/change`,{method:"POST",headers:{"User-Agent":e},body:JSON.stringify({token:this.token,uniqid:t})}).then((i)=>i.json())}async function k(e,t){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");return await fetch(`https://${this.domain}/api/favorite/get`,{method:"POST",headers:{"User-Agent":e},body:JSON.stringify({token:this.token,uniqid:t})}).then((i)=>i.json())}class a{parent;userAgent;constructor(e,t){this.parent=e,this.userAgent=t}change(e){return E.call(this.parent,this.userAgent,e)}get(e){return k.call(this.parent,this.userAgent,e)}}async function b(e){return await fetch(`https://${this.domain}/api/serverinfo-api`,{method:"GET",headers:{"User-Agent":e}}).then((o)=>o.json())}class G{userAgent;domain;token;me;user;users;ueuse;favorite;constructor(e){this.userAgent="uwuzu.js/beta",this.domain=e,this.token=null,this.me=null,this.user=new m(this,this.userAgent),this.users=new u(this,this.userAgent),this.ueuse=new U(this,this.userAgent),this.favorite=new a(this,this.userAgent)}getServerInfo(){return b.call(this,this.userAgent)}}export{G as Uwuzu};
