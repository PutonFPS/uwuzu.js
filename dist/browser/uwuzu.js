class r extends Error{code;constructor(t,e){super(t);this.name="UwuzuError",this.code=e}}async function h(t,e){if(t==="")throw new r("トークンが入力されていません","UWUZU_TOKEN_INVALID");if(this.token!==null)throw new r("あなたはすでにログインコマンドを実行しています","UWUZU_ALREADY_LOGGED_IN");let o=await fetch(`https://${this.domain}/api/me/`,{method:"POST",headers:{"User-Agent":e},body:JSON.stringify({token:t})}).then((i)=>i.json());if(o.success===!1)throw new r("トークンが存在しないか、無効です","UWUZU_TOKEN_INVALID");else return this.token=t,this.me=o,o}async function w(t,e,o){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");return await fetch(`https://${this.domain}/api/me/notification/`,{method:"POST",headers:{"User-Agent":o},body:JSON.stringify({token:this.token,limi:t,page:e})}).then((s)=>s.json())}async function d(t){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");return await fetch(`https://${this.domain}/api/me/notification/read`,{method:"POST",headers:{"User-Agent":t},body:JSON.stringify({token:this.token})}).then((o)=>o.json())}async function p(t,e){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");let o={};if(o.token=this.token,e.userName)o.username=e.userName;if(e.profile)o.profile=e.profile;if(e.icon)o.icon=e.icon;if(e.header)o.header=e.header;if(Object.keys(o).length===0)throw new r("変更する項目を最低でも一つは入力してください","UWUZU_CONFIG_OPTION_INVALID");return await fetch(`https://${this.domain}/api/me/settings`,{method:"POST",headers:{"User-Agent":t},body:JSON.stringify(o)}).then((s)=>s.json())}async function c(t,e,o){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");return await fetch(`https://${this.domain}/api/ueuse/bookmark`,{method:"POST",headers:{"User-Agent":t},body:JSON.stringify({token:this.token,limit:e,page:o})}).then((s)=>s.json())}class m{parent;userAgent;constructor(t,e){this.parent=t,this.userAgent=e}login(t){return h.call(this.parent,t,this.userAgent)}getNotification({limit:t=5,page:e=1}={}){return w.call(this.parent,t,e,this.userAgent)}setNotificationRead(){return d.call(this.parent,this.userAgent)}setConfig(t){return p.call(this.parent,this.userAgent,t)}getBookmark({limit:t=5,page:e=1}={}){return c.call(this.parent,this.userAgent,t,e)}}async function g(t,e){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");return await fetch(`https://${this.domain}/api/users/`,{method:"POST",headers:{"User-Agent":e},body:JSON.stringify({token:this.token,userid:t})}).then((i)=>i.json())}async function z(t,e,o){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");let i;if(o===!0)i=await fetch(`https://${this.domain}/api/users/follow`,{method:"POST",headers:{"User-Agent":e},body:JSON.stringify({token:this.token,userid:t})}).then((s)=>s.json());else i=await fetch(`https://${this.domain}/api/users/unfollow`,{method:"POST",headers:{"User-Agent":e},body:JSON.stringify({token:this.token,userid:t})}).then((s)=>s.json());return i}class U{parent;userAgent;constructor(t,e){this.parent=t,this.userAgent=e}getUser(t){return g.call(this.parent,t,this.userAgent)}setUserFollow(t,e){return z.call(this.parent,t,this.userAgent,e)}}async function O(t,e,o){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");return await fetch(`https://${this.domain}/api/ueuse?token=${this.token}`,{method:"POST",headers:{"User-Agent":t},body:JSON.stringify({limit:e,page:o})}).then((s)=>s.json())}async function _(t,e){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");return await fetch(`https://${this.domain}/api/ueuse/get`,{method:"POST",headers:{"User-Agent":t},body:JSON.stringify({token:this.token,uniqid:e})}).then((i)=>i.json())}async function N(t,e,o,i){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");return await fetch(`https://${this.domain}/api/ueuse/replies`,{method:"POST",headers:{"User-Agent":t},body:JSON.stringify({token:this.token,uniqid:e,limit:o,page:i})}).then((f)=>f.json())}async function y(t,e,o){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");return await fetch(`https://${this.domain}/api/ueuse/mentions`,{method:"POST",headers:{"User-Agent":t},body:JSON.stringify({token:this.token,limit:e,page:o})}).then((s)=>s.json())}async function S(t,e,o,i){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_ALREADY_LOGGED_IN");return await fetch(`https://${this.domain}/api/ueuse/search`,{method:"POST",headers:{"User-Agent":t},body:JSON.stringify({token:this.token,keyword:e,limit:o,page:i})}).then((f)=>f.json())}async function P(t,e){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");let o={};if(o.token=this.token,o.text=e.text,e.nsfw)o.nsfw=e.nsfw;if(e.image1)o.image1=e.image1;if(e.image2)o.image2=e.image2;if(e.image3)o.image3=e.image3;if(e.image4)o.image4=e.image4;if(e.replyId)o.replyid=e.replyId;if(e.reuseId)o.reuseid=e.reuseId;return await fetch(`https://${this.domain}/api/ueuse/create`,{method:"POST",headers:{"User-Agent":t},body:JSON.stringify(o)}).then((s)=>s.json())}async function R(t,e){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");return await fetch(`https://${this.domain}/api/ueuse/delete`,{method:"POST",headers:{"User-Agent":t},body:JSON.stringify({token:this.token,uniqid:e})}).then((i)=>i.json())}class u{parent;userAgent;constructor(t,e){this.parent=t,this.userAgent=e}fetchUeuses({limit:t=5,page:e=1}={}){return O.call(this.parent,this.userAgent,t,e)}getUeuse(t){return _.call(this.parent,this.userAgent,t)}getReplies(t,{limit:e=5,page:o=1}={}){return N.call(this.parent,this.userAgent,t,e,o)}getMentions({limit:t=5,page:e=1}={}){return y.call(this.parent,this.userAgent,t,e)}search(t,{limit:e=5,page:o=1}={}){return S.call(this.parent,this.userAgent,t,e,o)}create(t){return P.call(this.parent,this.userAgent,t)}remove(t){return R.call(this.parent,this.userAgent,t)}}async function E(t,e){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");return await fetch(`https://${this.domain}/api/favorite/change`,{method:"POST",headers:{"User-Agent":t},body:JSON.stringify({token:this.token,uniqid:e})}).then((i)=>i.json())}async function G(t,e){if(!this.me)throw new r("ログインコマンドを実行していません","UWUZU_NOT_LOGGED_IN");return await fetch(`https://${this.domain}/api/favorite/get`,{method:"POST",headers:{"User-Agent":t},body:JSON.stringify({token:this.token,uniqid:e})}).then((i)=>i.json())}class a{parent;userAgent;constructor(t,e){this.parent=t,this.userAgent=e}change(t){return E.call(this.parent,this.userAgent,t)}get(t){return G.call(this.parent,this.userAgent,t)}}async function x(t){return await fetch(`https://${this.domain}/api/serverinfo-api`,{method:"GET",headers:{"User-Agent":t}}).then((o)=>o.json())}class k{userAgent;domain;token;me;user;users;ueuse;favorite;constructor(t){this.userAgent="uwuzu.js/beta",this.domain=t,this.token=null,this.me=null,this.user=new m(this,this.userAgent),this.users=new U(this,this.userAgent),this.ueuse=new u(this,this.userAgent),this.favorite=new a(this,this.userAgent)}getServerInfo(){return x.call(this,this.userAgent)}}export{k as Uwuzu};
